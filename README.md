# processing-optimizer-results

Process the output from the aws cost optimizer, which, given the demand for cloud instances, finds the markets configuration with the lowest cost. It generates two csv files:
- od_vs_re.csv: for every hour, the total cost (including all instance types) for the on-demand and reserves market in the optimal solution.
- opt_vs_all_od.csv: for every hour, the total cost of the optimal solution and the total cost of the all on demand strategy, which we use as a baseline for performance comparison.

## How to run

First, you should have in this directory the files *total_purchases.csv* (one of the optimizers output) and the demand file used as one of the optimizer inputs.

Run *creating_costs.py* passing the demand file as a parameter to get the instance prices from aws. In this version, the prices are configured for the 1 year partial upfront reserve market. So, the optimization should have been performed with that same reserve market. Note that you must have the [aws cli](https://aws.amazon.com/cli/?nc1=h_ls) installed and configured.

```
python3 creating_costs.py {path of the demand file}
```

Then, run *processing.py* with three parameters (in that order): *total_purchases.csv*, the demand file and *reserve_prt1y_code.csv* (generated by *creating_costs.py*). This will generate *od_vs_re.csv* and *opt_vs_all_od.csv*.

```
python3 processing.py total_purchases.csv {path of the demand file} reserve_prt1y_code.csv
```

Graphs for the results can be generated running the R script *graphs.R* in the graphs directory.